# v1.10: 테이블 UI 개선 (고정 헤더, 데모 데이터 확장)

## 작업 일자
2026-02-09

## 변경 요약
관리자웹 전체 탭의 테이블 UI를 대폭 개선. 고정 헤더, 컬럼 맞춤 너비, 상태 배지 디자인, 데모 데이터 50명 확장.

---

## 주요 변경사항

### 1. StickyHeaderTable 공통 위젯 (신규)
**파일:** `apps/manager_web/lib/core/widgets/sticky_data_table.dart`

- `TableColumnDef` 클래스: 컬럼 정의 (label, width, numeric, onSort, sortAscending)
- `StickyHeaderTable` 위젯: 고정 헤더 + ListView.builder 스크롤 바디
- `wrapWithCard()` 정적 메서드: Card 래핑 + 컬럼 너비에 맞춘 자동 사이즈 조정
- 헤더 스타일: indigo[50] 배경, FontWeight.w700, fontSize 13, indigo[900] 텍스트
- 정렬 표시 지원 (arrow_upward/arrow_downward 아이콘)
- 행 선택, 커스텀 행 색상, 짝/홀 행 배경색 지원
- `totalWidth()`: 컬럼 합계 + 34px (패딩 32 + Card 보더 2)
- Card: `margin: EdgeInsets.zero`, `clipBehavior: Clip.antiAlias`

### 2. 대시보드 (출퇴근 현황) 개선
**파일:** `apps/manager_web/lib/features/dashboard/presentation/dashboard_screen.dart`

- DataTable → StickyHeaderTable.wrapWithCard() 전환
- 10개 컬럼: No.(55), 사업장(85), 성명(85), 직위(75), 직무(110), 출근(75), 퇴근(75), 근무시간(90), 상태(80), 비고(130)
- 전 컬럼 정렬 기능 (오름차순/내림차순)
- 상태 배지: 텍스트 크기에 맞춘 compact 디자인 (Align + alpha 0.15)

### 3. 데모 데이터 50명 확장
**파일:** `apps/manager_web/lib/features/dashboard/data/dashboard_repository.dart`

- 8명 → 50명 데모 데이터
- 4개 센터 분포: 서이천(14명), 안성(12명), 의왕(12명), 부평(12명)
- 요약: 전체 50명, 출근 45명, 퇴근 28명, 지각 4명, 조퇴 3명, 미출근 5명
- 다양한 직무/직위/상태 포함

### 4. 근로자 관리 테이블 개선
**파일:** `apps/manager_web/lib/features/workers/presentation/workers_screen.dart`

- SingleChildScrollView → ConstrainedBox(45%) + Expanded 레이아웃
- StickyHeaderTable.wrapWithCard() 적용
- 10개 컬럼: No., 성명, 소속회사, 사번, 전화번호, 직무, 직위, 사업장, 재직상태, 입사일
- 행 선택 및 클릭 이벤트 연동

### 5. 근태 기록 테이블 개선
**파일:** `apps/manager_web/lib/features/attendance_records/presentation/attendance_records_screen.dart`

- Column + Expanded 레이아웃으로 전환
- StickyHeaderTable.wrapWithCard() 적용
- 상태 배지 compact 디자인

### 6. 급여 관리 테이블 개선
**파일:** `apps/manager_web/lib/features/payroll/presentation/payroll_screen.dart`

- Column + Expanded 레이아웃으로 전환
- StickyHeaderTable.wrapWithCard() 적용
- 합계 행: amber 배경 + rowColorBuilder 활용

### 7. 기타
- 계정관리 메뉴 제거 (side_nav_drawer.dart, main.dart)
- `canManageAccounts` 권한 함수 제거 (permissions.dart)

---

## 해결한 이슈

| 이슈 | 원인 | 해결 |
|------|------|------|
| Row overflow 8px | Card 기본 margin(4px*2) + border(1px*2) 미반영 | `margin: EdgeInsets.zero` + totalWidth에 +34 반영 |
| 테이블 전체 너비 확장 | Expanded가 부모 너비 전체 사용 | wrapWithCard()에서 SizedBox(width: tableWidth)로 제한 |
| 상태 배지 너비 확장 | SizedBox 부모가 Container를 늘림 | Align(centerLeft) 래핑으로 intrinsic width 유지 |

---

## 파일 변경 목록

| 구분 | 파일 | 작업 |
|------|------|------|
| 신규 | `core/widgets/sticky_data_table.dart` | 공통 테이블 위젯 |
| 수정 | `features/dashboard/data/dashboard_repository.dart` | 50명 데모 데이터 |
| 수정 | `features/dashboard/presentation/dashboard_screen.dart` | StickyHeaderTable 적용 |
| 수정 | `features/workers/presentation/workers_screen.dart` | StickyHeaderTable 적용 |
| 수정 | `features/attendance_records/presentation/attendance_records_screen.dart` | StickyHeaderTable 적용 |
| 수정 | `features/payroll/presentation/payroll_screen.dart` | StickyHeaderTable 적용 |
| 수정 | `core/widgets/side_nav_drawer.dart` | 계정관리 메뉴 제거 |
| 수정 | `core/utils/permissions.dart` | canManageAccounts 제거 |
| 수정 | `main.dart` | 계정관리 라우팅 제거 |
