# v1.11: 근로자 상세 페이지 + 근로자관리 필터

## 작업 일자
2026-02-09

## 변경 요약
어느 화면에서든 근로자 이름을 클릭하면 별도 페이지로 전환되어, 상단에 인사기록카드(읽기전용)와 하단에 월별 근태기록 테이블을 보여주는 기능 구현.

## 신규 파일 (3개)

### 1. `features/worker_detail/data/worker_detail_repository.dart`
- **WorkerMonthlyAttendanceRow**: date, checkIn, checkOut, workHours, status, remainingLeave, note
- **WorkerMonthlySummary**: workDays, lateDays, earlyLeaveDays, absentDays, remainingLeave
- **WorkerDetailRepository**: 데모 데이터 생성
  - `getMonthlyAttendance(workerName, yearMonth)` — 일별 근태 생성
  - `getMonthlySummary(workerName, yearMonth)` — 월별 요약 계산
  - 토/일 = 휴일, 평일: 85% 출근, 5% 지각, 3% 조퇴, 5% 미출근, 2% 연차
  - `workerName.hashCode ^ (year*100+month)` 시드로 일관된 랜덤 데이터

### 2. `features/worker_detail/providers/worker_detail_provider.dart`
- `workerDetailRepositoryProvider` — Provider
- `detailYearMonthProvider` — StateProvider (현재 년월)
- `workerMonthlyAttendanceProvider` — FutureProvider.family (workerName)
- `workerMonthlySummaryProvider` — FutureProvider.family (workerName)

### 3. `features/worker_detail/presentation/worker_detail_screen.dart`
- 뒤로가기 버튼 + 타이틀
- 인사기록카드 (Card, 읽기전용): 사진 + 성명/사번/소속회사/전화번호/직위/직무/사업장/재직상태/입사일
- 월별 근태 현황: 월 선택 드롭다운 + 요약 카드 5개 (출근일수/지각/조퇴/결근/잔여연차)
- StickyHeaderTable: 날짜(105) | 출근(75) | 퇴근(75) | 근무시간(90) | 상태(80) | 잔여연차(85) | 적요(150)
- 휴일 행은 연한 회색 배경

## 수정 파일 (5개)

### 4. `main.dart`
- `_detailWorkerName` 상태 추가
- `_openWorkerDetail(name)` / `_closeWorkerDetail()` 메서드
- `_buildPage()` — 상세 페이지 우선 표시
- 사이드 내비 클릭 시 상세 페이지 닫힘 (`_detailWorkerName = null`)
- 각 Screen에 `onWorkerTap: _openWorkerDetail` 콜백 전달

### 5. `dashboard_screen.dart`
- `onWorkerTap` 파라미터 추가
- 성명 컬럼(index 2): GestureDetector + 인디고 밑줄 스타일

### 6. `workers_screen.dart`
- `onWorkerTap` 파라미터 추가
- 성명 컬럼(index 1): GestureDetector + 인디고 밑줄 스타일

### 7. `attendance_records_screen.dart`
- `onWorkerTap` 파라미터 추가
- 성명 컬럼(index 2): GestureDetector + 인디고 밑줄 스타일

### 8. `payroll_screen.dart`
- `onWorkerTap` 파라미터 추가
- 성명 컬럼(index 1, 데이터 행만): GestureDetector + 인디고 밑줄 스타일

## 내비게이션 동작
- 어느 화면에서든 이름 클릭 → 상세 페이지 진입
- 뒤로가기 버튼 → 원래 탭 복원
- 사이드 내비 클릭 → 상세 페이지 닫히고 해당 탭으로 이동
- 상세 페이지 표시 시 사이드 내비에서 아무 메뉴도 선택되지 않음 (selectedIndex = -1)

## 추가: 근로자관리 필터 바 (workers_screen.dart)
- 근태기록 화면과 동일한 스타일의 Card 기반 필터 바 추가
- 필터: 사업장(전체/서이천/안성/의왕/부평), 직무(전체/6종), 재직상태(전체/정규직/계약직/일용직/파견/육아휴직)
- 이름 검색 필드 + 초기화 버튼
- 인사기록카드 아래, 근로자 목록 테이블 위에 배치
