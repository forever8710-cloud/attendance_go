<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>WorkFlow v1.20 외부 서비스 설정 가이드</title>
  <style>
    @page { margin: 20mm; }
    body {
      font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
      line-height: 1.8;
      color: #222;
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 30px;
      font-size: 14px;
    }
    h1 {
      text-align: center;
      color: #1a237e;
      font-size: 24px;
      border-bottom: 3px solid #1a237e;
      padding-bottom: 15px;
      margin-bottom: 30px;
    }
    h2 {
      color: #fff;
      background: #3949ab;
      padding: 10px 18px;
      border-radius: 8px;
      font-size: 18px;
      margin-top: 40px;
      page-break-after: avoid;
    }
    h3 {
      color: #283593;
      font-size: 16px;
      margin-top: 25px;
      border-left: 4px solid #3949ab;
      padding-left: 12px;
      page-break-after: avoid;
    }
    .intro {
      background: #e8eaf6;
      border-radius: 10px;
      padding: 20px 24px;
      margin-bottom: 30px;
    }
    .intro p { margin: 5px 0; }
    .step-box {
      background: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 18px 22px;
      margin: 12px 0;
      page-break-inside: avoid;
    }
    .step-box .step-title {
      font-weight: bold;
      color: #1a237e;
      font-size: 15px;
      margin-bottom: 10px;
    }
    .step-box ol, .step-box ul {
      margin: 8px 0;
      padding-left: 22px;
    }
    .step-box li {
      margin-bottom: 6px;
    }
    .url-box {
      background: #fff3e0;
      border: 1px solid #ffb74d;
      border-radius: 6px;
      padding: 10px 16px;
      margin: 8px 0;
      font-family: Consolas, monospace;
      font-size: 13px;
      word-break: break-all;
    }
    .warn-box {
      background: #fce4ec;
      border: 1px solid #ef9a9a;
      border-radius: 6px;
      padding: 12px 16px;
      margin: 10px 0;
    }
    .info-box {
      background: #e3f2fd;
      border: 1px solid #90caf9;
      border-radius: 6px;
      padding: 12px 16px;
      margin: 10px 0;
    }
    .success-box {
      background: #e8f5e9;
      border: 1px solid #a5d6a7;
      border-radius: 6px;
      padding: 12px 16px;
      margin: 10px 0;
    }
    .copy-value {
      background: #263238;
      color: #80cbc4;
      padding: 8px 14px;
      border-radius: 6px;
      font-family: Consolas, 'Courier New', monospace;
      font-size: 13px;
      display: block;
      margin: 8px 0;
      word-break: break-all;
    }
    .checklist {
      background: #f9fbe7;
      border: 1px solid #c5e1a5;
      border-radius: 8px;
      padding: 16px 22px;
      margin: 20px 0;
    }
    .checklist li { margin-bottom: 8px; }
    .emoji { font-size: 18px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px 14px;
      text-align: left;
    }
    th { background: #e8eaf6; color: #1a237e; }
    .page-break { page-break-before: always; }
    .footer {
      margin-top: 50px;
      text-align: center;
      color: #999;
      font-size: 12px;
      border-top: 1px solid #ddd;
      padding-top: 15px;
    }
    @media print {
      body { padding: 0; }
      .no-print { display: none; }
    }
    .print-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #3949ab;
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 15px;
      cursor: pointer;
      font-family: 'Malgun Gothic', sans-serif;
    }
    .print-btn:hover { background: #1a237e; }
  </style>
</head>
<body>

<button class="print-btn no-print" onclick="window.print()">PDF로 저장하기</button>

<h1>WorkFlow v1.20<br>외부 서비스 설정 가이드</h1>

<div class="intro">
  <p><strong>왜 이 작업이 필요한가요?</strong></p>
  <p>v1.20에서 카카오 로그인, 구글 로그인, 주소 검색 기능의 <strong>코드는 이미 완성</strong>되어 있습니다.</p>
  <p>하지만 이 기능들이 실제로 동작하려면 <strong>외부 서비스에서 "열쇠(API 키)"를 발급</strong>받아야 합니다.</p>
  <p>이 가이드는 그 열쇠를 발급받는 과정을 안내합니다.</p>
</div>

<table>
  <tr>
    <th>설정 작업</th>
    <th>어디서 하나요?</th>
    <th>뭘 얻나요?</th>
  </tr>
  <tr>
    <td>카카오 로그인</td>
    <td>카카오 개발자 사이트</td>
    <td>REST API 키 + Client Secret</td>
  </tr>
  <tr>
    <td>구글 로그인</td>
    <td>구글 클라우드 콘솔</td>
    <td>Client ID + Client Secret</td>
  </tr>
  <tr>
    <td>카카오/구글 연결</td>
    <td>Supabase 대시보드</td>
    <td>위에서 받은 키를 입력</td>
  </tr>
  <tr>
    <td>주소 검색</td>
    <td>도로명주소 사이트</td>
    <td>승인키 (confmKey)</td>
  </tr>
</table>

<!-- ============================= -->
<h2>Part 1. 카카오 로그인 설정</h2>
<!-- ============================= -->

<h3>1단계: 카카오 개발자 사이트 가입 & 앱 만들기</h3>

<div class="step-box">
  <div class="step-title">접속할 사이트</div>
  <div class="url-box">https://developers.kakao.com/</div>
  <ol>
    <li>위 주소에 접속합니다</li>
    <li>오른쪽 위 <strong>"로그인"</strong> 클릭 → 카카오 계정으로 로그인</li>
    <li>처음이면 개발자 약관에 동의합니다</li>
    <li>상단 메뉴에서 <strong>"내 애플리케이션"</strong> 클릭</li>
    <li><strong>"애플리케이션 추가하기"</strong> 버튼 클릭</li>
    <li>아래와 같이 입력:
      <ul>
        <li>앱 이름: <strong>WorkFlow</strong></li>
        <li>사업자명: <strong>회사명</strong> (개인이면 본인 이름)</li>
      </ul>
    </li>
    <li><strong>"저장"</strong> 클릭</li>
  </ol>
</div>

<h3>2단계: REST API 키 확인하기</h3>

<div class="step-box">
  <ol>
    <li>방금 만든 앱(WorkFlow)을 클릭해서 들어갑니다</li>
    <li>왼쪽 메뉴 → <strong>"앱 키"</strong> 클릭</li>
    <li><strong>"REST API 키"</strong> 값을 복사합니다</li>
  </ol>
  <div class="info-box">
    이 REST API 키는 나중에 Supabase에 입력할 겁니다. 메모장에 붙여넣기 해두세요.
  </div>
</div>

<h3>3단계: 카카오 로그인 켜기</h3>

<div class="step-box">
  <ol>
    <li>왼쪽 메뉴 → <strong>"카카오 로그인"</strong> 클릭</li>
    <li><strong>"활성화 설정"</strong> 옆 스위치를 <strong>ON</strong>으로 변경</li>
    <li>아래쪽 <strong>"Redirect URI"</strong> 항목에서 <strong>"URI 추가"</strong> 클릭</li>
    <li>아래 주소를 정확히 복사해서 붙여넣기:</li>
  </ol>
  <div class="copy-value">https://panigexuqlafvdzydbtg.supabase.co/auth/v1/callback</div>
  <ol start="5">
    <li><strong>"저장"</strong> 클릭</li>
  </ol>
</div>

<h3>4단계: 동의항목 설정</h3>

<div class="step-box">
  <ol>
    <li>왼쪽 메뉴 → <strong>"카카오 로그인"</strong> → <strong>"동의항목"</strong> 클릭</li>
    <li><strong>"닉네임"</strong> → "필수 동의"로 설정</li>
    <li><strong>"카카오계정(이메일)"</strong> → "필수 동의"로 설정</li>
    <li><strong>"저장"</strong> 클릭</li>
  </ol>
</div>

<h3>5단계: Client Secret 만들기</h3>

<div class="step-box">
  <ol>
    <li>왼쪽 메뉴 → <strong>"카카오 로그인"</strong> → <strong>"보안"</strong> 클릭</li>
    <li><strong>"Client Secret"</strong> 옆 <strong>"코드 생성"</strong> 버튼 클릭</li>
    <li>생성된 코드를 복사합니다 (메모장에 붙여넣기)</li>
    <li>활성화 상태를 <strong>"사용함"</strong>으로 변경</li>
  </ol>
  <div class="warn-box">
    <strong>주의:</strong> REST API 키와 Client Secret 두 가지 모두 필요합니다. 잃어버리지 마세요!
  </div>
</div>

<!-- ============================= -->
<h2 class="page-break">Part 2. 구글 로그인 설정</h2>
<!-- ============================= -->

<h3>1단계: 구글 클라우드 콘솔 접속</h3>

<div class="step-box">
  <div class="step-title">접속할 사이트</div>
  <div class="url-box">https://console.cloud.google.com/</div>
  <ol>
    <li>위 주소에 접속 → 구글 계정으로 로그인</li>
    <li>처음이면 약관에 동의합니다</li>
  </ol>
</div>

<h3>2단계: 프로젝트 만들기</h3>

<div class="step-box">
  <ol>
    <li>페이지 위쪽 <strong>"프로젝트 선택"</strong> (또는 "Select a project") 클릭</li>
    <li><strong>"새 프로젝트"</strong> (New Project) 클릭</li>
    <li>프로젝트 이름: <strong>WorkFlow</strong> 입력</li>
    <li><strong>"만들기"</strong> (Create) 클릭</li>
    <li>만들어진 프로젝트가 선택되어 있는지 확인 (위쪽에 "WorkFlow" 표시)</li>
  </ol>
</div>

<h3>3단계: OAuth 동의 화면 설정</h3>

<div class="step-box">
  <ol>
    <li>왼쪽 메뉴 → <strong>"APIs & Services"</strong> → <strong>"OAuth consent screen"</strong></li>
    <li><strong>"External"</strong> 선택 → <strong>"만들기"</strong> (Create)</li>
    <li>아래 항목 입력:
      <ul>
        <li>앱 이름: <strong>WorkFlow</strong></li>
        <li>사용자 지원 이메일: <strong>본인 이메일</strong></li>
        <li>개발자 연락처 이메일: <strong>본인 이메일</strong></li>
      </ul>
    </li>
    <li>나머지는 비워두고 <strong>"저장 후 계속"</strong> 클릭 (총 3~4번)</li>
    <li>마지막에 <strong>"대시보드로 돌아가기"</strong></li>
  </ol>
</div>

<h3>4단계: OAuth Client ID 만들기</h3>

<div class="step-box">
  <ol>
    <li>왼쪽 메뉴 → <strong>"APIs & Services"</strong> → <strong>"사용자 인증 정보"</strong> (Credentials)</li>
    <li>위쪽 <strong>"+ 사용자 인증 정보 만들기"</strong> → <strong>"OAuth 클라이언트 ID"</strong> 선택</li>
    <li>애플리케이션 유형: <strong>"웹 애플리케이션"</strong> (Web application)</li>
    <li>이름: <strong>WorkFlow Web</strong></li>
    <li><strong>"승인된 리디렉션 URI"</strong> (Authorized redirect URIs) 에서 <strong>"+ URI 추가"</strong></li>
    <li>아래 주소를 정확히 복사해서 붙여넣기:</li>
  </ol>
  <div class="copy-value">https://panigexuqlafvdzydbtg.supabase.co/auth/v1/callback</div>
  <ol start="7">
    <li><strong>"만들기"</strong> (Create) 클릭</li>
    <li>팝업에 나오는 <strong>"클라이언트 ID"</strong>와 <strong>"클라이언트 보안 비밀번호"</strong>를 모두 복사</li>
  </ol>
  <div class="warn-box">
    <strong>주의:</strong> 이 팝업은 한 번만 나옵니다! 반드시 두 값 모두 메모장에 붙여넣기 해두세요.
  </div>
</div>

<!-- ============================= -->
<h2 class="page-break">Part 3. Supabase에 카카오/구글 연결하기</h2>
<!-- ============================= -->

<div class="info-box">
  Part 1, 2에서 메모해둔 키 값들을 여기서 입력합니다.
</div>

<h3>1단계: Supabase 대시보드 접속</h3>

<div class="step-box">
  <div class="step-title">접속할 사이트</div>
  <div class="url-box">https://supabase.com/dashboard</div>
  <ol>
    <li>로그인 → 프로젝트 선택 (attendance_go 프로젝트)</li>
  </ol>
</div>

<h3>2단계: 카카오 Provider 활성화</h3>

<div class="step-box">
  <ol>
    <li>왼쪽 메뉴 → <strong>"Authentication"</strong> 클릭</li>
    <li>위쪽 탭에서 <strong>"Providers"</strong> 클릭</li>
    <li>목록에서 <strong>"Kakao"</strong>를 찾아 클릭 (펼침)</li>
    <li><strong>"Kakao enabled"</strong> 토글을 <strong>ON</strong></li>
    <li>입력:
      <ul>
        <li><strong>Client ID</strong> → Part 1에서 복사한 <strong>REST API 키</strong></li>
        <li><strong>Client Secret</strong> → Part 1에서 복사한 <strong>Client Secret</strong></li>
      </ul>
    </li>
    <li><strong>"Save"</strong> 클릭</li>
  </ol>
</div>

<h3>3단계: 구글 Provider 활성화</h3>

<div class="step-box">
  <ol>
    <li>같은 Providers 페이지에서 <strong>"Google"</strong>을 찾아 클릭</li>
    <li><strong>"Google enabled"</strong> 토글을 <strong>ON</strong></li>
    <li>입력:
      <ul>
        <li><strong>Client ID</strong> → Part 2에서 복사한 <strong>클라이언트 ID</strong></li>
        <li><strong>Client Secret</strong> → Part 2에서 복사한 <strong>클라이언트 보안 비밀번호</strong></li>
      </ul>
    </li>
    <li><strong>"Save"</strong> 클릭</li>
  </ol>
</div>

<h3>4단계: Redirect URL 추가</h3>

<div class="step-box">
  <ol>
    <li>왼쪽 메뉴 → <strong>"Authentication"</strong> → 위쪽 탭 <strong>"URL Configuration"</strong></li>
    <li><strong>"Redirect URLs"</strong> 항목에서 <strong>"Add URL"</strong> 클릭</li>
    <li>아래 주소를 정확히 입력:</li>
  </ol>
  <div class="copy-value">io.supabase.workflowapp://login-callback</div>
  <ol start="4">
    <li><strong>"Save"</strong> 클릭</li>
  </ol>
  <div class="info-box">
    이 주소는 카카오/구글 로그인 완료 후 앱으로 돌아오는 경로입니다.
  </div>
</div>

<!-- ============================= -->
<h2 class="page-break">Part 4. 주소 검색 API 키 발급</h2>
<!-- ============================= -->

<h3>1단계: 도로명주소 사이트 접속</h3>

<div class="step-box">
  <div class="step-title">접속할 사이트</div>
  <div class="url-box">https://business.juso.go.kr/addrlink/openApi/searchApi.do</div>
  <ol>
    <li>위 주소에 접속합니다</li>
    <li><strong>"회원가입"</strong> 클릭 → 가입 (무료)</li>
    <li>로그인합니다</li>
  </ol>
</div>

<h3>2단계: API 키 신청</h3>

<div class="step-box">
  <ol>
    <li>로그인 후 <strong>"API 신청"</strong> 메뉴 클릭</li>
    <li>아래 항목 입력:
      <ul>
        <li>서비스명: <strong>WorkFlow</strong></li>
        <li>서비스URL: <strong>http://localhost</strong> (테스트용)</li>
        <li>활용용도: <strong>직원 주소 등록</strong> (자유롭게 작성)</li>
      </ul>
    </li>
    <li><strong>"신청"</strong> 클릭</li>
    <li>신청 즉시 또는 1~2일 내 <strong>"승인키"</strong>가 발급됩니다</li>
    <li>승인키를 복사합니다</li>
  </ol>
  <div class="info-box">
    무료이며 하루 1,000건까지 검색 가능합니다. 충분합니다.
  </div>
</div>

<h3>3단계: .env 파일에 키 추가</h3>

<div class="step-box">
  <p>발급받은 승인키를 저에게 알려주시면 아래 파일에 추가해드립니다:</p>
  <div class="copy-value">apps/worker_app/.env</div>
  <p>추가될 내용:</p>
  <div class="copy-value">JUSO_CONFIRM_KEY=발급받은승인키</div>
</div>

<!-- ============================= -->
<h2 class="page-break">최종 체크리스트</h2>
<!-- ============================= -->

<div class="checklist">
  <p><strong>모든 설정이 끝나면 아래 항목을 확인해주세요:</strong></p>
  <ul>
    <li>&#9744; 카카오 개발자 사이트에서 REST API 키 + Client Secret 발급 완료</li>
    <li>&#9744; 카카오 로그인 활성화 + Redirect URI 등록 완료</li>
    <li>&#9744; 카카오 동의항목 (닉네임, 이메일) 설정 완료</li>
    <li>&#9744; 구글 클라우드에서 OAuth Client ID + Secret 발급 완료</li>
    <li>&#9744; 구글 OAuth 리디렉션 URI 등록 완료</li>
    <li>&#9744; Supabase에서 카카오 Provider 활성화 + 키 입력 완료</li>
    <li>&#9744; Supabase에서 구글 Provider 활성화 + 키 입력 완료</li>
    <li>&#9744; Supabase Redirect URL에 딥링크 추가 완료</li>
    <li>&#9744; juso.go.kr에서 승인키 발급 완료</li>
    <li>&#9744; .env 파일에 JUSO_CONFIRM_KEY 추가 완료</li>
  </ul>
</div>

<div class="success-box">
  <strong>완료 후:</strong> 저에게 "설정 다 했어"라고 말씀해주시면, 바로 테스트를 도와드리겠습니다!
</div>

<div class="footer">
  WorkFlow v1.20 설정 가이드 | 2026-02-14 작성
</div>

</body>
</html>
