# v1.25: 대시보드 차트 → ECOUNT ERP 스타일 캘린더 교체

## 작업 일시
2026-02-17

## 변경 요약
대시보드 상단의 주간 출근율 차트(LineChart) + 오늘 출근 현황 차트(PieChart)를 제거하고, ECOUNT ERP 스타일의 테이블 그리드 캘린더(일정관리)로 교체

## 변경 파일

### 신규 파일
| 파일 | 설명 |
|------|------|
| `features/dashboard/providers/calendar_provider.dart` | CalendarEvent 모델 (id, title, eventDate, description, color, category, location), CalendarRepository (CRUD), Riverpod providers |
| `features/dashboard/presentation/widgets/dashboard_calendar.dart` | ECOUNT ERP 스타일 커스텀 Table 그리드 캘린더 + 팝업 다이얼로그 |
| `features/dashboard/presentation/widgets/korean_holidays.dart` | 한국 공휴일 데이터 (2024~2030, 양력고정 + 음력기반) |

### 수정 파일
| 파일 | 변경 내용 |
|------|-----------|
| `pubspec.yaml` (manager_web) | `table_calendar: ^3.2.0` 추가 |
| `dashboard_screen.dart` | 차트 import → calendar import, weeklyTrend 제거, 날짜 헤더 제거 (상단 바로 이동), 차트 영역 → `DashboardCalendar()` |
| `main.dart` | 상단 헤더 "Workflow by TKholdings" → 날짜 표시 (`yyyy년 MM월 dd일 (E)`)로 교체, `intl` import 추가 |

### Supabase
| 항목 | 내용 |
|------|------|
| 마이그레이션 1 | `calendar_events` 테이블 생성 (id, title, description, event_date, color, created_by, timestamps) |
| 마이그레이션 2 | `category` (default '일정'), `location` 컬럼 추가 |
| RLS | 인증 사용자 전체 CRUD 허용 |
| 인덱스 | event_date, created_by |

## 대시보드 레이아웃 (변경 후)
1. **상단 바에 날짜 표시** (기존 "Workflow by TKholdings" 제거 → 날짜로 교체)
2. **ECOUNT ERP 스타일 캘린더** (884px 좌측정렬 테이블 그리드) ← NEW
3. 요약 카드 (전체직원, 주간출근, 야간출근, 퇴근, 지각, 조퇴, 미출근)
4. 센터 필터 + 검색
5. 출퇴근 현황 테이블

## 캘린더 기능

### UI 스타일
- **ECOUNT ERP 참고 디자인**: 884px 좌측정렬 Table 위젯 그리드 (table_calendar 대신 커스텀)
- 헤더: `< 2026/02 > 일정관리` (좌우 화살표 월 이동)
- 요일 헤더(14pt): 일(빨강) / 월~금 / 토(파랑) 색상 구분
- 셀 높이 80px, 날짜 숫자 15pt (우측 상단), 오늘 날짜 원형(26px) 배경
- 이전/다음 달 날짜 흐리게 표시

### 한국 공휴일
- `KoreanHolidays` 클래스: 양력 고정 8개 + 음력 기반(설날/추석/부처님오신날) 2024~2030
- 공휴일 날짜: 빨간색 표시 + 셀 좌측 상단에 공휴일명 (10pt)
- 일요일: 빨간색, 토요일: 파란색

### 이벤트 표시
- 카테고리별 색상 뱃지: 일정(인디고), 회의(빨강), 연차(주황), 출장(초록), 교육(보라), 기타(회색)
- 셀 내 최대 3개 이벤트 태그 (카테고리뱃지 + 제목)
- 3개 초과 시 "+N건 더보기" 표시

### 날짜 클릭 팝업 (DayEventsPopup)
- ECOUNT 스타일 인디고 헤더 바 (날짜 + 공휴일 뱃지)
- 일정 목록: 카테고리뱃지 + 제목 + 메모 미리보기 + 수정/삭제 아이콘
- "일정 추가" 버튼 → EventFormDialog 열기
- 빈 상태: "등록된 일정이 없습니다" 안내

### 일정 등록/수정 폼 (EventFormDialog)
- ECOUNT 스타일 인디고 헤더 "일정관리등록" / "일정 수정"
- 폼 행 (라벨 70px + 입력): 제목, 일정구분(드롭다운), 날짜(읽기전용), 장소, 메모(5줄)
- 일정구분 변경 시 색상 자동 매핑
- 하단: 저장/수정 + 닫기 버튼
- 저장 중 로딩 스피너 표시

## CalendarEvent 모델
```dart
class CalendarEvent {
  final String id;
  final String title;
  final DateTime eventDate;
  final String? description;
  final String color;       // hex (예: '#3F51B5')
  final String category;    // 일정, 회의, 연차, 출장, 교육, 기타
  final String? location;
  final String? createdBy;
  final DateTime? createdAt;
}
```
