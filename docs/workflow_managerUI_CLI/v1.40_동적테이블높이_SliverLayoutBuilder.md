# v1.40 — 동적 테이블 높이 (CustomScrollView + SliverLayoutBuilder)

**작업일**: 2026-02-26

---

## 배경

- v1.39에서 `SingleChildScrollView + SizedBox(height: 500)` 패턴으로 전체 화면 표준화 완료
- 문제: 43인치 모니터에서 테이블이 10행만 표시되고 하단에 큰 여백 발생
- 승근수 대표 노트북에서도 동일하게 10행만 표시 (모니터 크기 무관하게 고정 500px)
- **목표**: 모든 모니터에서 테이블이 남은 공간을 꽉 채우도록 동적 높이 적용

## 핵심 패턴

```dart
// CustomScrollView + SliverLayoutBuilder 동적 높이 패턴
return CustomScrollView(
  slivers: [
    SliverToBoxAdapter(child: topContent),
    SliverLayoutBuilder(
      builder: (context, constraints) {
        final remaining = constraints.viewportMainAxisExtent
            - constraints.precedingScrollExtent;
        final tableHeight = remaining < 500 ? 500.0 : remaining;
        return SliverToBoxAdapter(
          child: SizedBox(height: tableHeight, child: tableContent),
        );
      },
    ),
  ],
);
```

**동작 원리**:
- `viewportMainAxisExtent`: 뷰포트(화면) 높이
- `precedingScrollExtent`: 테이블 위의 모든 콘텐츠 높이
- `remaining = viewport - preceding`: 테이블에 남은 공간
- 큰 모니터 (remaining > 500): 남은 공간 전체를 테이블이 채움
- 작은 모니터 (remaining < 500): 최소 500px 유지, 페이지 스크롤 활성화

## 변경 사항

### 수정된 화면 (6개)

| 화면 | 파일 | 변경 전 | 변경 후 |
|------|------|---------|---------|
| 출퇴근현황 | `dashboard_screen.dart` | `SingleChildScrollView + SizedBox(500)` | `CustomScrollView + SliverLayoutBuilder` |
| 근태현황 | `attendance_records_screen.dart` | `SingleChildScrollView + SizedBox(500)` | `CustomScrollView + SliverLayoutBuilder` |
| 근로자등록 | `workers_screen.dart` | `SingleChildScrollView + SizedBox(500)` | `CustomScrollView + SliverLayoutBuilder` |
| 급여관리 | `payroll_screen.dart` | `SingleChildScrollView + SizedBox(500)` | `CustomScrollView + SliverLayoutBuilder` |
| 계정관리 | `accounts_screen.dart` | `SingleChildScrollView + SizedBox(500)` | `CustomScrollView + SliverLayoutBuilder` |
| 근로자상세 | `worker_detail_screen.dart` | `SingleChildScrollView + SizedBox(500)` | `CustomScrollView + SliverLayoutBuilder` |

### 수정 불필요 (1개)

| 화면 | 이유 |
|------|------|
| 설정 | TabBarView 기반, 테이블 없음 |

### worker_detail_screen 특수 처리

- 기존: 인사기록카드 + 요약카드 + 테이블이 하나의 `Padding > Column` 안에 있음
- 변경: 인사기록카드 + 요약카드를 `SliverToBoxAdapter`로 분리, 테이블을 별도 `SliverLayoutBuilder`에 배치
- 테이블에 자체 `Padding(EdgeInsets.fromLTRB(28, 0, 28, 12))` 적용

---

## 효과

| 모니터 크기 | v1.39 (고정 500px) | v1.40 (동적 높이) |
|------------|-------------------|------------------|
| 13인치 노트북 | 테이블 500px, 페이지 스크롤 | 테이블 500px, 페이지 스크롤 (동일) |
| 24인치 모니터 | 테이블 500px, 하단 여백 | 테이블 ~700px, 여백 없음 |
| 43인치 모니터 | 테이블 500px, 하단 큰 여백 | 테이블 ~1200px, 여백 없음 |

---

## 수정 파일 목록

| 파일 | 변경 |
|------|------|
| `dashboard_screen.dart` | `SingleChildScrollView` → `CustomScrollView + SliverLayoutBuilder` |
| `attendance_records_screen.dart` | `SingleChildScrollView` → `CustomScrollView + SliverLayoutBuilder` |
| `payroll_screen.dart` | `SingleChildScrollView` → `CustomScrollView + SliverLayoutBuilder` |
| `accounts_screen.dart` | `SingleChildScrollView` → `CustomScrollView + SliverLayoutBuilder` |
| `workers_screen.dart` | `SingleChildScrollView` → `CustomScrollView + SliverLayoutBuilder` |
| `worker_detail_screen.dart` | 구조 분리 + `CustomScrollView + SliverLayoutBuilder` |
