# v1.41 — 캘린더 페이지 분리 + 오늘 일정 알림 배너

**작업일**: 2026-02-26

---

## 변경 사항

### 1단계: 캘린더 별도 페이지 분리

**배경**: 대시보드 상단에 캘린더가 있어 출퇴근 현황 테이블 공간이 협소했음

**변경 내용**:
- 사이드 메뉴에 **"일정관리"** 추가 (인덱스 1, `Icons.calendar_month`)
- 기존 메뉴 인덱스 전체 +1 시프트:
  - 0: 출퇴근 현황 (유지)
  - **1: 일정관리 (신규)**
  - 2: 근태 현황 (기존 1)
  - 3: 근로자 등록 (기존 2)
  - 4: 급여 관리 (기존 3)
  - 5: 설정 (기존 4)
  - 6: 계정관리 (기존 5)
- 새 파일: `features/calendar/presentation/calendar_screen.dart`
- `DashboardCalendar`에서 `SizedBox(width: 884)` 제거 → 화면 너비에 맞게 반응형 확장
- `dashboard_screen.dart`에서 캘린더 위젯 및 import 제거

### 2단계: 오늘 일정 알림 배너

**배경**: 캘린더를 별도 페이지로 이동했으므로, 당일 이벤트를 헤더에서 빠르게 확인 가능하도록 알림 추가

**변경 내용**:
- `calendar_provider.dart`에 `todayEventsProvider` 추가 (당일 이벤트만 조회)
- `main.dart` 헤더에 `_buildTodayEventsAlert()` 메서드 추가
- **반짝이는 애니메이션**: `AnimationController` + `repeat(reverse: true)` → 1.2초 주기 펄싱
  - 테두리 색상, 배경 투명도, 박스 쉐도우가 부드럽게 변화
  - 색상: `Colors.deepPurple` 계열
- **클릭 시 팝업**: `_TodayEventsPopup`
  - 버튼 바로 아래 드롭다운 방식 (`Positioned` 위젯)
  - 배경 클릭 시 닫힘
  - "일정관리 →" 링크: 클릭 시 일정관리 페이지(인덱스 1)로 이동
  - 이벤트 목록: 카테고리 배지 + 제목 + 장소(있으면)
- 오늘 일정이 없으면 배너 숨김 (`SizedBox.shrink()`)

---

## 수정 파일 목록

| 파일 | 변경 내용 |
|------|----------|
| `features/calendar/presentation/calendar_screen.dart` | **신규** — CalendarScreen 독립 페이지 |
| `features/dashboard/presentation/widgets/dashboard_calendar.dart` | `SizedBox(width: 884)` 제거 → 반응형 |
| `features/dashboard/presentation/dashboard_screen.dart` | DashboardCalendar import 및 위젯 제거 |
| `features/dashboard/providers/calendar_provider.dart` | `todayEventsProvider` 추가 |
| `core/utils/permissions.dart` | 메뉴 인덱스 주석 + canAccessMenu 인덱스 +1 시프트 |
| `core/widgets/side_nav_drawer.dart` | 일정관리 메뉴 추가, 배지 인덱스 2→3 |
| `main.dart` | CalendarScreen 추가, _buildPage 인덱스 업데이트, `_buildTodayEventsAlert`, `_TodayEventsBadge`, `_TodayEventsPopup` 추가 |

---

## 효과

| 항목 | 이전 | 이후 |
|------|------|------|
| 출퇴근현황 공간 | 캘린더로 상단 절반 차지 | 요약카드+테이블만, 공간 2배 확보 |
| 캘린더 너비 | 고정 884px | 화면 너비에 맞게 자동 확장 |
| 당일 일정 확인 | 캘린더 페이지 직접 이동 필요 | 헤더 알림 배너에서 즉시 확인 |
| 일정 알림 UX | 없음 | 반짝이는 퍼플 배지 + 드롭다운 팝업 |
